<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="activerecord"
             type="Castle.ActiveRecord.Framework.Config.ActiveRecordSectionHandler, Castle.ActiveRecord" />
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>

  <connectionStrings>
    <add name="DefaultDatabase" connectionString="Server=.\SQLEXPRESS;Initial Catalog=RobtaPayment;User=RobtaPayment;Pwd=toeter" />
    <!--<add name="DefaultDatabase" connectionString="Server=.\SQLExpress;Initial Catalog=RobtaPayment;Integrated SecuritySSPI;"/>-->
  </connectionStrings>

  <appSettings>
    <add key="TimeToDeactivateEnrolmentsInMinutes" value="5"/>
    <add key="TimeToDeleteEnrolmentsInMinutes" value="60"/>
  </appSettings>

  <activerecord pluralizeTableNames="false" default-lazy="true" isDebug="false" isWeb="false">
    <config>
      <add key="adonet.batch_size" value="25" />
      <add key="connection.connection_string_name" value="DefaultDatabase" />
      <add key="connection.isolation" value="ReadCommitted" />
      <add key="connection.provider" value="NHibernate.Connection.DriverConnectionProvider, NHibernate" />
      <add key="dialect" value="NHibernate.Dialect.MsSql2005Dialect, NHibernate" />
      <add key="query.substitutions" value="true=1,false=0" />
      <add key="proxyfactory.factory_class" value="NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle" />
      <add key="show_sql" value="false" />
    </config>
  </activerecord>
  
  <log4net xmlns="urn:log4net">
    <appender name="GenericLog" type="log4net.Appender.RollingFileAppender,log4net">
      <param name="File" value="Logs\\generic.log" />
      <param name="AppendToFile" value="true" />
      <param name="RollingStyle" value="Date" />
      <param name="DatePattern" value="yyyy.MM.dd" />
      <param name="StaticLogFileName" value="true" />
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
      </layout>
    </appender>

    <appender name="NHibernateLog" type="log4net.Appender.RollingFileAppender,log4net">
      <param name="File" value="Logs\\nhibernate.log" />
      <param name="AppendToFile" value="true" />
      <param name="RollingStyle" value="Date" />
      <param name="DatePattern" value="yyyy.MM.dd" />
      <param name="StaticLogFileName" value="true" />
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
      </layout>
    </appender>

    <appender name="CastleLog" type="log4net.Appender.RollingFileAppender,log4net">
      <param name="File" value="Logs\\castle.log" />
      <param name="AppendToFile" value="true" />
      <param name="RollingStyle" value="Date" />
      <param name="DatePattern" value="yyyy.MM.dd" />
      <param name="StaticLogFileName" value="true" />
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
      </layout>
    </appender>

    <appender name="RobtaPaymentLog" type="log4net.Appender.RollingFileAppender,log4net">
      <param name="File" value="Logs\\RobtaPayment.log" />
      <param name="AppendToFile" value="true" />
      <param name="RollingStyle" value="Date" />
      <param name="DatePattern" value="yyyy.MM.dd" />
      <param name="StaticLogFileName" value="true" />
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="%d [%t] %-5p %c - %m%n" />
      </layout>
    </appender>

    <root>
      <level value="WARN" />
      <appender-ref ref="GenericLog" />
    </root>

    <logger name="NHibernate.SQL" additivity="false">
      <level value="WARN" />
      <appender-ref ref="NHibernateLog" />
    </logger>

    <logger name="Castle" additivity="false">
      <level value="WARN" />
      <appender-ref ref="CastleLog" />
    </logger>

    <logger name="RobtaPayment" additivity="false">
      <level value="ALL" />
      <appender-ref ref="RobtaPaymentLog" />
    </logger>
  </log4net>

  <startup>
    <supportedRuntime version="v2.0.50727"/>
  </startup>
</configuration>
